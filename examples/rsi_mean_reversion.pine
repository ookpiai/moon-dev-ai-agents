//@version=5
strategy("RSI Mean Reversion - Moon Dev", overlay=false,
         initial_capital=10000,
         default_qty_type=strategy.percent_of_equity,
         default_qty_value=95)

// ============================================================================
// ðŸŒ™ MOON DEV'S RSI MEAN REVERSION STRATEGY
// ============================================================================
//
// STRATEGY LOGIC:
// - Buy when RSI drops below oversold level (expecting bounce)
// - Sell when RSI rises above overbought level (expecting pullback)
// - Works best in ranging/sideways markets
//
// BEST TIMEFRAMES: 5m, 15m, 30m
// ASSET: BTC, ETH, high volatility altcoins
//
// ============================================================================

// Inputs
rsiLength = input.int(14, "RSI Length", minval=1, maxval=100)
oversoldLevel = input.int(30, "Oversold Level", minval=1, maxval=50)
overboughtLevel = input.int(70, "Overbought Level", minval=50, maxval=100)
exitAtMidline = input.bool(true, "Exit at RSI 50 (Midline)")
useStopLoss = input.bool(true, "Use Stop Loss")
stopLossPct = input.float(3.0, "Stop Loss %", minval=0.1, maxval=10, step=0.1)

// Calculate RSI
rsi = ta.rsi(close, rsiLength)

// Entry Conditions
longCondition = ta.crossover(rsi, oversoldLevel)  // RSI crosses above oversold
exitCondition = exitAtMidline ? ta.crossover(rsi, 50) : ta.crossover(rsi, overboughtLevel)

// Stop Loss
var float entryPrice = na
if (longCondition)
    entryPrice := close

stopLossPrice = useStopLoss and not na(entryPrice) ? entryPrice * (1 - stopLossPct/100) : na

// Execute Trades
if (longCondition)
    strategy.entry("ðŸŒ™ Moon Dev RSI Long", strategy.long)

if (exitCondition)
    strategy.close("ðŸŒ™ Moon Dev RSI Long", comment="ðŸ’° RSI Exit")

if (useStopLoss and not na(stopLossPrice) and close <= stopLossPrice)
    strategy.close("ðŸŒ™ Moon Dev RSI Long", comment="ðŸ›‘ Stop Loss")

// Plot RSI
plot(rsi, color=color.new(color.purple, 0), linewidth=2, title="RSI")
hline(overboughtLevel, "Overbought", color=color.red, linestyle=hline.style_dashed)
hline(50, "Midline", color=color.gray, linestyle=hline.style_dotted)
hline(oversoldLevel, "Oversold", color=color.green, linestyle=hline.style_dashed)

// Background coloring
bgcolor(rsi > overboughtLevel ? color.new(color.red, 90) :
        rsi < oversoldLevel ? color.new(color.green, 90) : na,
        title="RSI Zones")
